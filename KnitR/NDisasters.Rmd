
---

title: "CS 378 Data Science: An Analysis of Natural Disasters"

output: html_document

---


##What is a Natural Disaster?


It is a situation or event, which overwhelms local capacity, necessitating a request to national or international level for external assistance (definition considered in EM-DAT).


###Data Set and Sources

Our analysis relied on data from EM-DAT, the World Bank, the Advanced National Seismic System (ANSS), Global Risk Data Platform, and the World Data Service:


####[__EM-DAT__](http://www.emdat.be/database)

EM-DAT is an international disaster database founded by the Centre for Research on the Epidemiology of Disasters (CRED).  The EM-DAT database provided information from 1960-2014 such as:

* Disaster Type- Earthquakes, Storms, etc.

* Number Injured- Number of people reported injured in the disaster event.

* Number of Deaths- Number of people reported dead in the disaster event .

* Number left Homeless- Number of people reported homeless.

* Number Affected- Number - People requiring immediate assistance during a period of emergency, i.e. requiring basic survival needs such as food, water, shelter, sanitation and immediate medical assistance. Appearance of a significant number of cases of an infectious disease introduced in a region or a population that is usually free from that disease.

* Total Damage (Estimated) - Estimated loss caused by the disaster in US dollars.


####[__World Bank__](http://databank.worldbank.org/data/home.aspx)

The World Bank is a United Nations international financial institution that provides loans to developing countries for capital programs. We enriched our dataset by incorporating country indicators from 1960-2014:

* GDP (in US dollars)

* Population

* Income Group (Gross National Income per Capita)

* Many others…


####[__ANSS (Advanced National Seismic System) Global Earthquake Catalog__](http://ncedc.org/anss/catalog-search.html)


* ANSS is hosted by the Northern California Earthquake Data Center. The mission of ANSS is to provide accurate and timely data and information for seismic events, including their effects on buildings and structures.

* This dataset provided Global earthquake records from the last 50 years (since 2014) (~570,000 rows)

* Search parameters used:

    + catalog = ANSS

    + start_time = 1964/01/01,00:00:00

    + end_time = 2014/09/12,22:13:44

        + covers the last 50 years, anything larger would have been unmanageable/unrealistic at this point due to accuracy of data measurements

    + minimum_magnitude = 3.0

        + 3.0 was chosen as a minimum because that is generally the minimum threshold for people to notice an earthquake

    + maximum_magnitude = 10

    + event_type = E 

####[__Global Risk Data Platform: Earthquakes - Risk, Annual Average Losses__](http://preview.grid.unep.ch/index.php?preview=data&events=earthquakes&evcat=8&lang=eng)

* The Global Risk Data Platform is created and hosted by UNEP/GRID-Geneva and supported by UNISDR. The Global Risk Data Platform allows the visualisation of data on natural hazards, exposure (both human and economical), and risk.

* This dataset provided average annual losses from earthquakes (~ 200 rows after excluding those with missing data)


####[__National Geophysical Data Center / World Data Service (NGDC/WDS): Significant Volcanic Eruptions Database__](http://www.ngdc.noaa.gov/nndc/servlet/ShowDatasets?dataset=102557&search_look=50&display_look=50)


* World Data Service is hosted by the National Geophysical Data Center of the National Oceanic and Atmospheric Administration. 

* Search parameters were all left blank (so we used the entire data set, unfiltered)

* This dataset provides significant volcanic eruptions data (~650 rows)

    + includes eruptions over a long period of time (thousands of years) but predominantly contains information from the 1900s.


####[__National Geophysical Data Center / World Data Service (NGDC/WDS): Global Historical Tsunami Database__](http://www.ngdc.noaa.gov/nndc/struts/form?t=101650&s=70&d=7)


* Hosted by the National Geophysical Data Center of the National Oceanic and Atmospheric Administration.

* This dataset provides  Global tsunami source data (~2,500 rows) and Global tsunami runup data (~25,000 rows)

    + includes tsunamis from approximately the last two thousand years, but mostly from the last few hundred years.

* search parameters were all left blank (again using the entire data set, unfiltered)

* the url above links to the 'event' information, you can get to the 'runup' information [__here__](http://www.ngdc.noaa.gov/nndc/struts/form?t=101650&s=167&d=166)



##Geospatial Analysis

Our initial analysis used the following services ANSS, Global Risk Data Platform, and World Data Service to analyze specific natural disasters to get a sense of “what was interesting”:

* Earthquakes

* Tsunamis

* Volcanic Eruptions


 Most of the work was exploratory. This analysis used RStudio to generate the results and process the data. Nothing of interest was really found but we learned a lot about R, RStudio, and Shiny. We also learned about the general workflow of obtaining the data, cleaning the data, filtering and applying transforms to see if the data revealed anything interesting. 

###Results
![Top 10 locations of economic loss due to tsunamis since 2010](Images/TsunamiTop10.png "Top 10 locations of economic loss due to tsunamis since 2010")
![Top 10 locations of Volcano related deaths since 2010](Images/VolcanoesTop10.png "Top 10 locations of Volcano related deaths since 2010")
![Top 8 locations of economic loss due to volcano eruptions since 2010](Images/VolcanoTop8.png "Top 8 locations of economic loss due to volcano eruptions since 2010")
###Shiny App

The Shiny App interface:

--picture of shiny app
![Shiny App](Images/shinyapp.png)

The app allows you to see a map of top 10 seismic activity by magnitude since 1960. The slider bar allows you to adjust the year and the marks show information such as country name and magnitude.





##Natural Disasters: A Regional and Economic Perspective

Our more recent analysis considered the impact of natural disasters on countries internationally. This analysis used the EM-DAT and WorldBank data sets exclusively. 


This analysis used the unsupervised algorithms Clustering and Anomaly Detection from Oracle Data Miner:


--picture of whole workflow


### Rare Disasters

Anomalous records in our data have the following disaster type:  

* epidemics

* volcanic eruptions

* insect infestations

* mass movement (dry/wet)

* droughts


--picture of anomalous bar charts


What we found: Insect Infestation and Epidemics are more frequent in lower income countries.



###Disaster Trends


These series of bar charts plot the Occurrence vs Year for each disaster type we analyzed. Each bar is broken into color coded income groups to see the distribution of occurrences.


The Occurrence measures how many times the disaster of that type occurred in a certain country for that year.


Out of all the disaster types high income countries seem to deal with frequent storms.


Disaster occurrences seem to be on the rise except for epidemics, insect infestation, mass movement (dry/wet), volcanoes, and wildfires.


### Measuring Disaster Significance

We chose to measure a natural disasters impact relative to a country in terms of two measures to more accurately assess the damage done by the disaster to the country.


* Demographic Damage Ratio=(#Affected + #Injured +#Deaths + #Homeless)/Population of Country

* Damage GDP Ratio= Total Damage /GDP of country

![Average Damage GDP vs. year](Images/DamageGDPRatio.jpg)


This is a bar chart plotting the average Damage GDP Ratio per year for all countries.


Each bar is broken into income groups of the countries contributing to this average.


Historically, High income countries (Orange and Green) do not contribute to the average Damage GDP Ratio as much as Low to Middle income countries.

![Average Demographic Damage vs. year](Images/SigRatio.jpg)

2)This bar chart depicts similar information to the previous one except the average Demographic Damage Ratio is calculated for each year.


Historically, High income countries do not sustain as much demographic damage than low to middle income countries.



![Average Damage GDP vs. Average Demographic Damage](Images/Ratioall.jpg)

3)This scatterplot shows which disasters contributed most to the average Demographic Damage Ratio and the average Damage GDP Ratio (the averages were calculated across all years). It sums up the previous two bar charts by removing the Year axis and considering how much each country, color coded by its income group, contributed to each of the Average Damage GDP ratio and the Demographic Damage Ratio.


The outliers in the 1st,2nd, and 4th quadrants are lower to upper middle income countries. This plot reveals the outliers contributing disproportionately to the overall Averages of Demographic Damage and Damage GDP Ratios.


High income countries suffer less economic and demographic damage among natural disasters according to our data. Surprisingly, Low Income countries mostly lie in the third quadrant.


--data miner
![Clustering Workflow](Images/Classification.png)


These visuals were inspired by the cluster analysis done in Oracle Data Miner. We ran various attributes we wanted to cluster and the ones that seemed most interesting were our two measures with income group. We further


We used the K-Means algorithm and saw that the decision tree it produced generally grouped lower income countries into clusters with high demographic damage ratios and high damage gdp ratios. This led us to consider the scatterplot above. Then, we wondered if time played a role to see if these clusterings generally held. This led to two the bar charts above.

![Decision Tree generated by K Means](Images/decisiontree.png)

What we found: Low to middle Income countries contribute disproportionately more to the average of the demographic damage ratio and the damage gdp ratio.






### Per Capita Analysis

We wanted to use data mining with some calculated per capita measures in order to gain some more insight into the data and the economic characteristics of countries which are exposed to certain disasters. First, using a SQL query, shown here, we calculated GDP per capita, number of affected people per capita, number of deaths per capita, and the ratio of economic damage to GDP.

-- Show sql query screenshot here

Though we tried several different algorithms with this data, most didn’t show much promise in regards to finding anything interesting. However, we did finally come across something using some of the clustering algorithms, which fit well with the analysis we had done in Tableau, discussed in the previous section. The Oracle Data Miner nodes shown here (with some extra details) show the basic approach used, where we did one set of algorithms using the continuous ‘GDP per Capita’ measure and the other with the discrete ‘Income Group’ measure instead.

-- Show data miner clustering screenshots here

Shown in the next two sets of images, some of the clustering algorithms indicated some pretty interesting trends. In one run, 98% (!) of disasters were grouped into a single node. Though no other variation that we tried got result quite so staggering, most of them suggested a similar trend of lower income countries being disproportionately affected by more significant, and sometimes chronic, disasters.

--Show first set of clustering results

A second interesting clustering:

--Show second set

Taken together, the clustering builds we ran suggested a fairly clear overall trend:

* The vast majority of disasters (up to 98%) affect only a small portion of the populations of countries that they hit (< 11.5%).


* The remaining disasters are the ones which affect a much more substantial portion of the populations (sometimes even more than 50%).


* These disasters are limited almost exclusively to countries with a relatively low GDP per capita, or low income classification.



Going off of this information, and keeping in mind what we had done earlier in Tableau (as mentioned in the previous section) we constructed a few more graphs that seemed to really reinforce what our previous analysis had suggested.


These first scatterplots show GDP per Capita plotted against the ‘Affected Ratio’ (number of affected people per capita) and the ‘Damage Ratio’ (ratio of economic damage to GDP), respectively. 

-- show per capita scatter plots 



#### Results


##Tableau Demo

![Tableau Demo Dashboard](Images/RegionalAnalysisDashboard.jpg)

The Regional Analysis Dashboard summarizes our findings into one app that allows users to explore different combinations of disaster types, income groups of countries, and even filter the results by region. The pie chart on the left bottom displays the distribution of disaster occurrences for High Income countries. The colors represent the disaster type and the size of each slice corresponds to the number of occurrences from 1960-2014. 


The user can see the results of their choices on a map whose marks are color and size coded according to the average of the two damage ratios we considered Damage GDP ratio and Demographic Damage Ratio. 


The image of the interface shows that Storms account for the largest number of occurrences in our database for High Income countries. The map reveals the Americas (more specifically the Caribbean) to be prone to economic and human loss.


##Conclusions and Future explorations

Our overall analysis shows that Countries with lower to middle incomes (GNI) suffer disproportionately more from natural disasters. From our clustering analysis we were able to conclude

* Low to middle income countries suffer disproportionately compared to high income countries in terms of economic damage and casualties (demographic damage) on average.


One result that surprised us was the detection of epidemics and even insect infestations as anomalous. We suspect this is because there are still low to lower middle income countries suffering from poor sanitation leading to disease and infestation. Some ideas for the future to extend our analysis in this direction could be to:

* identify the particular disasters such as epidemics that low income countries face,research which treatments or vaccines have been available, and compare the cost of these treatments with the cost these epidemics have already taken.


* Identify why droughts do so much demographic damage across all countries.


* Find correlations between damage done by disaster types across different income groups (e.g. does extreme temperature play a role in droughts? How much stronger or weaker is this correlation if we restrict our analysis to low to middle income countries? )


* Extend the Tableau Dashboard to filter by Year

Copyright © 2014 Mark Sandan & Kevin Roesner & Arturo Lemus 













(To an Appendix file)Tableau

Explanations:







 
 

Description of "Sig. Ratio vs. Damage GDP Ratio"

Average of Significance Ratio vs. average of Damage GDP Ratio. Color shows details about INCOME_GROUP. Details are shown for Country Name and Disaster Type. The data is filtered on sum of Significance Ratio, average of LOG10 Total Damage, sum of Damage GDP Ratio and sum of Total Damage. The sum of Significance Ratio filter keeps non-Null values only. The average of LOG10 Total Damage filter keeps non-Null values only. The sum of Damage GDP Ratio filter keeps non-Null values only. The sum of Total Damage filter ranges from 1 to 210,000,000. The view is filtered on INCOME_GROUP and Exclusions (Country Name,INCOME_GROUP,Year 2). The INCOME_GROUP filter keeps High income: OECD, High income: nonOECD, Low income, Lower middle income and Upper middle income. The Exclusions (Country Name,INCOME_GROUP,Year 2) filter keeps 4,027 members.

Marks





The mark type is Shape (Automatic).
 

Stacked marks is off.
 

Shelves






Pages:
 
Year
 

Rows:
 
Avg. Damage GDP Ratio
 

Columns
 
Avg. Significance Ratio
 

Filters:
 
Significance Ratio, Avg. LOG10 Total Damage, INCOME_GROUP, Exclusions (Country Name,INCOME_GROUP,Year 2), Damage GDP Ratio, Total Damage
 

Level of detail:
 
Country Name, Disaster Type
 

Color:
 
INCOME_GROUP
 

Dimensions

Country Name has 156 members on this sheet

Members: Albania; Argentina; Bangladesh; Belgium; The Bahamas; ...

Disaster Type has 11 members on this sheet

Members: Drought; Earthquake (seismic activity); Flood; Mass Movement Wet; Storm; …

INCOME_GROUP has 5 members on this sheet

Members: High income: OECD; High income: nonOECD; Low income; Lower middle income; Upper middle income

Year has 53 members on this sheet

Members: 1963; 1966; 1976; 1995; 2002; ...

Measures

Average of Significance Ratio ranges from 0.0000 to 0.9629 on this sheet.

The formula is ([Homeless]+[Deaths]+[Affected]+[Injured])/[Population]

Average of LOG10 Total Damage has the value Null on this sheet.

The filter associated with this field keeps non-Null values only.

The formula is LOG([Total Damage],10)

Average of Damage GDP Ratio ranges from 0.0000 to 0.2484 on this sheet.

The formula is ([Total Damage]*100)/[Gdp Us Dollars]

Sum of Significance Ratio has the value Null on this sheet.

The filter associated with this field keeps non-Null values only.

The formula is ([Homeless]+[Deaths]+[Affected]+[Injured])/[Population]

Sum of Damage GDP Ratio has the value Null on this sheet.

The filter associated with this field keeps non-Null values only.

The formula is ([Total Damage]*100)/[Gdp Us Dollars]

Sum of Total Damage ranges from 1 to 210,000,000 on this sheet.

The filter associated with this field ranges from 1 to 210,000,000.

Sets

Exclusions (Country Name,INCOME_GROUP,Year 2) has 1,754 members on this sheet

Members: Albania, Upper middle income, 2002; Bangladesh, Low income, 1963; Bangladesh, Low income, 1966; Bangladesh, Low income, 1976; Belgium, High income: OECD, 2002; ...







 
 

 
 

 
 

 
 

 
 

 
 


 
 

 
 

Description of "Sig. Ratio by Income Group "

The plot of average of Significance Ratio for Year. Color shows details about INCOME GROUP. Details are shown for Country Name and Disaster Type. The view is filtered on average of Significance Ratio and INCOME GROUP. The average of Significance Ratio filter keeps non-Null values only. The INCOME GROUP filter keeps High income: OECD, High income: nonOECD, Low income, Lower middle income and Upper middle income.

Marks





The mark type is Bar.
 

Stacked marks is on.
 

Shelves







Rows:
 
Avg. Significance Ratio
 

Columns:
 
Year
 

Filters:
 
Avg. Significance Ratio, INCOME_GROUP
 

Level of detail:
 
Country Name, Disaster Type
 

Color:
 
INCOME_GROUP
 

Dimensions

Country Name has 181 members on this sheet

Members: Afghanistan; Albania; Angola; Belgium; Burundi; ...

Disaster Type has 11 members on this sheet

Members: Drought; Earthquake (seismic activity); Flood; Mass Movement Wet; Storm; ...

INCOME_GROUP has 5 members on this sheet

Members: High income: OECD; High income: nonOECD; Low income; Lower middle income; Upper middle income

Year ranges from 1961.00 to 2013.00 on this sheet.

Measures

Average of Significance Ratio ranges from 0.000 to 1.564 on this sheet.

The filter associated with this field keeps non-Null values only.

The formula is ([Homeless]+[Deaths]+[Affected]+[Injured])/[Population]







 
 

 
 

 
 

 
 

 
 

 
 

Description of "Damage GDP Ratio by Income Group"

The plot of average of Damage GDP Ratio for Year. Color shows details about INCOME_GROUP. Details are shown for Country Name and Disaster Type. The data is filtered on sum of Damage GDP Ratio, which ranges from 0.002 to 1.

Marks






The mark type is Bar.
 

Stacked marks is on.
 

Shelves







Rows:
 
Avg. Damage GDP Ratio
 

Columns:
 
Year
 

Filters:
 
Damage GDP Ratio
 

Level of detail:
 
Country Name, Disaster Type
 

Color:
 
INCOME_GROUP
 

Dimensions

Country Name has 84 members on this sheet

Members: Armenia; Bangladesh; Bermuda; Comoros; The Bahamas; ...

Disaster Type has 9 members on this sheet

Members: Drought; Earthquake (seismic activity); Flood; Storm; Wildfire; ...

INCOME_GROUP has 5 members on this sheet

Members: High income: OECD; High income: nonOECD; Low income; Lower middle income; Upper middle income

Year ranges from 1961.00 to 2013.00 on this sheet.

Measures

Average of Damage GDP Ratio ranges from 0.0020 to 0.2484 on this sheet.

The formula is ([Total Damage]*100)/[Gdp Us Dollars]

Sum of Damage GDP Ratio ranges from 0.002 to 1 on this sheet.

The filter associated with this field ranges from 0.002 to 1.

The formula is ([Total Damage]*100)/[Gdp Us Dollars]

Data Source Details







Data Source:
 
EMDAT_WORLDBANK (DS_NATURAL_DISASTERS)
 

Type:
 
Oracle Database
 

Server:
 
128.83.138.158
 

Server Version:
 
12.1.0.1.0 - Oracle Database 12c Enterprise Edition (64bit Production)
 

Table:
 
EMDAT_WORLDBANK
 

Username:
 
ds_natural_disasters
 


Description of "Low Income Group Disasters"

Average of Damage GDP Ratio and average of Significance Ratio. Color shows details about Disaster Type. Details are shown for INCOME_GROUP. The view is filtered on INCOME_GROUP and average of Damage GDP Ratio. The INCOME_GROUP filter keeps Low income and Lower middle income. The average of Damage GDP Ratio filter keeps non-Null values only.

Average of Damage GDP Ratio Properties

Marks






The mark type is Bar (Automatic).
 

Stacked marks is on.
 

Shelves







Rows:
 
Avg. Damage GDP Ratio, Avg. Significance Ratio
 

Filters:
 
INCOME_GROUP, Avg. Damage GDP Ratio
 

Level of detail:
 
INCOME_GROUP
 

Color:
 
Disaster Type
 

Average of Significance Ratio Properties

Marks






The mark type is Bar (Automatic).
 

Stacked marks is on.
 

Shelves







Rows:
 
Avg. Damage GDP Ratio, Avg. Significance Ratio
 

Filters:
 
INCOME_GROUP, Avg. Damage GDP Ratio
 

Level of detail:
 
INCOME_GROUP
 

Color:
 
Disaster Type
 

Dimensions

Disaster Type has 11 members on this sheet

Members: Drought; Epidemic; Extreme temperature; Insect Infestation; Mass Movement Dry; ...

INCOME_GROUP has 2 members on this sheet

Members: Low income; Lower middle income

Measures

Average of Significance Ratio ranges from 0.0000 to 0.1265 on this sheet.

The formula is ([Homeless]+[Deaths]+[Affected]+[Injured])/[Population]

Average of Damage GDP Ratio ranges from 0.000000 to 0.005298 on this sheet.

The filter associated with this field keeps non-Null values only.

The formula is ([Total Damage]*100)/[Gdp Us Dollars]







 
 

 
 

 
 

 
 

 
 

 
 


Description of "High Income Group Disasters"

Average of Damage GDP Ratio and average of Significance Ratio. Color shows details about Disaster Type. Details are shown for INCOME_GROUP. The view is filtered on INCOME_GROUP, which keeps High income: OECD.

Average of Significance Ratio Properties

Marks






The mark type is Bar (Automatic).
 

Stacked marks is on.
 

Shelves







Rows:
 
Avg. Damage GDP Ratio, Avg. Significance Ratio
 

Filters:
 
INCOME_GROUP
 

Level of detail:
 
INCOME_GROUP
 

Color:
 
Disaster Type
 

Average of Damage GDP Ratio Properties







 

 

Shelves







Rows:
 
Avg. Damage GDP Ratio, Avg. Significance Ratio
 

Filters:
 
INCOME_GROUP
 

Level of detail:
 
INCOME_GROUP
 

Color:
 
Disaster Type
 

Dimensions

Disaster Type has 11 members on this sheet

Members: Drought; Earthquake (seismic activity); Extreme temperature; Flood; Wildfire; ...

INCOME_GROUP has 1 members on this sheet

Members: High income: OECD

Measures

Average of Significance Ratio ranges from 0.00000 to 0.01450 on this sheet.

The formula is ([Homeless]+[Deaths]+[Affected]+[Injured])/[Population]

Average of Damage GDP Ratio ranges from 0.0000000 to 0.0006007 on this sheet.

The formula is ([Total Damage]*100)/[Gdp Us Dollars]







 
 

 
 

 
 

 
 

 
 

 
 


Description of "Upper Middle High nonOECD Income Group Disasters"

Average of Damage GDP Ratio and average of Significance Ratio. Color shows details about Disaster Type. Details are shown for INCOME_GROUP. The view is filtered on INCOME_GROUP, which keeps High income: nonOECD and Upper middle income.

Average of Significance Ratio Properties

Marks






The mark type is Bar (Automatic).
 

Stacked marks is on.
 

Shelves







Rows:
 
Avg. Damage GDP Ratio, Avg. Significance Ratio
 

Filters:
 
INCOME_GROUP
 

Level of detail:
 
INCOME_GROUP
 

Color:
 
Disaster Type
 

Average of Damage GDP Ratio Properties

Marks






The mark type is Bar (Automatic).
 

Stacked marks is on.
 

Shelves







Rows:
 
Avg. Damage GDP Ratio, Avg. Significance Ratio
 

Filters:
 
INCOME_GROUP
 

Level of detail:
 
INCOME_GROUP
 

Color:
 
Disaster Type
 

Dimensions

Disaster Type has 11 members on this sheet

Members: Earthquake (seismic activity); Epidemic; Flood; Storm; Volcano; ...

INCOME_GROUP has 2 members on this sheet

Members: High income: nonOECD; Upper middle income

Measures

Average of Significance Ratio ranges from 0.00000 to 0.05288 on this sheet.

The formula is ([Homeless]+[Deaths]+[Affected]+[Injured])/[Population]

Average of Damage GDP Ratio ranges from 0.000000 to 0.002699 on this sheet.

The formula is ([Total Damage]*100)/[Gdp Us Dollars]







 
 

 
 

 
 

 
 

 
 

 
 


Description of "Disaster Trends"

The plot of count of Disaster Type for Year broken down by Disaster Type. Color shows details about INCOME_GROUP.

Marks






The mark type is Bar.
 

Stacked marks is on.
 

Shelves







Rows:
 
Disaster Type, Count of Disaster Type
 

Columns:
 
Year
 

Color:
 
INCOME_GROUP
 

Dimensions

Disaster Type has 11 members on this sheet

Members: Earthquake (seismic activity); Epidemic; Extreme temperature; Flood; Mass Movement Wet; ...

INCOME_GROUP has 6 members on this sheet

Members: High income: OECD; High income: nonOECD; Low income; Lower middle income; Upper middle income; ...

Year ranges from 1961.00 to 2014.00 on this sheet.

Measures

Count of Disaster Type ranges from 1 to 29 on this sheet.







 
 

 
 

 
 

 
 

 
 

 
 


 
 

 
 

 
 


